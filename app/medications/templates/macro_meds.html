<!--------------------------------------MEDICATIONS-------------------------------------->

{% macro med_image(med) %}
    <!--User can set image for each med, if none, a placeholder-->
    {% if "vitamin" in med.medname or "supplement" in med.medname %}
    <img class="img-fluid img-thumbnail w-50" src="{{ url_for('static', filename = 'images/med-thumbnail.png') }}" alt="Card image cap">
    {% else %}
    <div class="container-fluid justify-content-center bg-dark"
        style="height: 9rem;">
        <h6 class="pt-5 text-center text-light">Image</h6>
    </div>
    {% endif %}
{% endmacro %}


{% macro med_info(med) %}
    <!--Info for each MED-->
    <h5 class="card-header text-center py-3 bg-muted">{{ med.medname | upper }}</h5>

    <ul class="list-group list-group-flush">
        <li class="list-group-item">Dosage: {{ med.dose }} | Directions: {{ med.directions | capitalize }}</li>
        <li class="list-group-item">Category: {{ med.category }}</li>
        <li class="list-group-item">Purpose: {{ med.purpose }}</li>
        <li class="list-group-item">Notes: {{ med.notes }}</li>
    </ul>
{% endmacro %}


<!--function to view med-->
{% macro med_view(med) %}
    <a class="text-info" href="{{ url_for('meds_bp.med_page', id=med.id) }}">
        <i class="bi bi-three-dots-vertical"></i> <b>View</b>
    </a>
{% endmacro %}


<!--function to view med insights-->
{% macro med_insights(med) %}
    <a class="text-info" href="{{ url_for('meds_bp.med_insights_page', id=med.id) }}">
        <i class="bi bi-three-dots-vertical"></i> <b>Insights</b>
    </a>
{% endmacro %}


<!--function to edit med-->
{% macro med_edit(med) %}
    <a class="text-warning" href="{{ url_for('meds_bp.med_update_page', id=med.id) }}">
        <i class="bi bi-pencil-fill"></i> <b>Edit</b>
    </a>
{% endmacro %}


<!--function to delete med-->
{% macro med_delete(med) %}
    <a class="text-danger" data-bs-toggle="modal" data-bs-target="#delete-one-sm" href="#">
        <i class="bi bi-trash3-fill"></i> <b>Delete</b>
    </a>
    <!-- Modal -->
    <div class="modal fade" id="delete-one-sm" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="delete-one-sm-label" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header"><h5 class="modal-title" id="delete-one-sm-label">Delete {{ med.med_name | capitalize }}?</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">Are you sure you want to delete this? Data deleted won't be recovered anymore...
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <a class="btn btn-small btn-danger" href="{{ url_for('meds_bp.med_delete_page', id=med.id) }}">
                    <i class="bi bi-trash3-fill"></i> <b>Delete</b>
                </a>
            </div>
        </div>
    </div>
</div>
{% endmacro %}


{% macro med_insights_warnings(warnings) %}
    {% if warnings %}
    <table id="warnings" class="table table-hover table-striped table-success text-dark">
      <thead>
        <tr class="text-center">
          <th scope="col" >WARNINGS</th>
        </tr>
      </thead>
      <tbody>
        {% for info in warnings %}
        <tr>
          <td scope="row">{{ info }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
{% endmacro %}


{% macro med_insights_boxed_warnings(boxed_warnings) %}
    {% if boxed_warnings %}
    <table id="boxed_warnings" class="table table-hover table-striped table-success text-dark">
      <thead>
        <tr class="text-center">
          <th scope="col" >BOXED WARNINGS</th>
        </tr>
      </thead>
      <tbody>
        {% for info in boxed_warnings %}
        <tr>
          <td scope="row">{{ info }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
{% endmacro %}


{% macro med_insights_reactions(reactions) %}
    {% if reactions %}
    <table id="reactions" class="table table-hover table-striped table-success text-dark">
      <thead>
        <tr class="text-center">
          <th scope="col" >ADVERSE REACTIONS</th>
        </tr>
      </thead>
      <tbody>
        {% for info in reactions %}
        <tr>
          <td scope="row">{{ info }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
    {% endif %}
{% endmacro %}


{% macro med_insights_events(events) %}
    {% if events %}
    <table id="events" class="table table-hover table-striped table-success text-dark">
        <thead>
          <tr class="text-center">
            <th scope="col" >
              Reactions below were reported while patients were taking the drug. Please note that these reports are per
              incident and often reference multiple drugs, meaning the drug you're looking for may not be causally
              related to the reaction. Last updated on {{ data_event['last_updated_events'] }}.
            </th>
          </tr>
        </thead>
        <tbody>
          {% for event in events %}
          <tr>
            <td scope="row">{{ event["term"] }} has been reported {{ event["count"] }} times.</td>
          </tr>
          {% endfor %}
        </tbody>
        {% endif %}
    </table>
{% endmacro %}
